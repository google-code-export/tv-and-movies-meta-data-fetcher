<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>MediaInfoFetcher user guide</title><meta content="DocBook XSL Stylesheets V1.62.0" name="generator"><meta name="description" content="
				This document describes usage of the application MediaInfoFetcher version 1.0
			"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="N10001"></a>MediaInfoFetcher user guide</h1></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">John-Paul</span> <span class="surname">Stanford</span></h3><div class="affiliation"><div class="address"><p><span style="white-space: pre;"><tt class="email">&lt;<a href="mailto:dev@stanwood.org.uk">dev@stanwood.org.uk</a>&gt;</tt></span></p></div></div></div></div></div><div><p class="copyright">Copyright &copy; 2007 John-Paul Stanford</p></div><div><div class="abstract"><p class="title"><b>Abstract</b></p><p>
				This document describes usage of the application MediaInfoFetcher version 1.0
			</p></div></div></div><div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#introduction">1. Introduction</a></span></dt><dd><dl><dt><span class="sect1"><a href="#N1001F">Features</a></span></dt><dt><span class="sect1"><a href="#N1003B">Sources</a></span></dt><dt><span class="sect1"><a href="#N10040">Stores</a></span></dt><dd><dl><dt><span class="sect2"><a href="#N10047">org.stanwood.media.store.MemoryStore</a></span></dt><dt><span class="sect2"><a href="#N1004C">org.stanwood.media.store.XMLStore</a></span></dt><dt><span class="sect2"><a href="#N10051">org.stanwood.media.store.SapphireStore</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#installation">2. Installation</a></span></dt><dd><dl><dt><span class="sect1"><a href="#N1006D">1. Linux Binary Distribution Packages</a></span></dt><dt><span class="sect1"><a href="#N1008B">2. Any platform static Jar Disturbution</a></span></dt></dl></dd><dt><span class="chapter"><a href="#usage">3. CLI Usage</a></span></dt><dd><dl><dt><span class="sect1"><a href="#mediarenamercmd">media-renamer</a></span></dt><dd><dl><dt><span class="sect2"><a href="#N1011E">Pattern</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#configuration">4. Configuration</a></span></dt><dt><span class="chapter"><a href="#credits-and-licenses">5. Credits and Licenses</a></span></dt></dl></div><div class="list-of-examples"><p><b>List of Examples</b></p><dl><dt>3.1. <a href="#N1014B">Examples:</a></dt><dt>4.1. <a href="#N10169">/etc/mediafetcher-conf.xml</a></dt></dl></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="introduction"></a>Chapter&nbsp;1.&nbsp;Introduction</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#N1001F">Features</a></span></dt><dt><span class="sect1"><a href="#N1003B">Sources</a></span></dt><dt><span class="sect1"><a href="#N10040">Stores</a></span></dt><dd><dl><dt><span class="sect2"><a href="#N10047">org.stanwood.media.store.MemoryStore</a></span></dt><dt><span class="sect2"><a href="#N1004C">org.stanwood.media.store.XMLStore</a></span></dt><dt><span class="sect2"><a href="#N10051">org.stanwood.media.store.SapphireStore</a></span></dt></dl></dd></dl></div><p>
			MediaInfoFetcher is a application and a API which can be used to retrieve TV show 
			and movie meta data from Internet sources. This information is then stored 
			locally and can be used to rename media files with the correct title.
		</p><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N1001F"></a>Features</h2></div></div><div></div></div><p>
				<div class="itemizedlist"><ul type="disc"><li><p>Provides a CLI tool that renames media files with the correct names.</p></li><li><p>Fetches TV Show meta data from the Internet.</p></li><li><p>Allows multiple sources and stores.</p></li><li><p>Caches information in XML.</p></li><li><p>Runs on any platform that supports Java 1.6.</p></li><li><p>Provides a API for accessing the information.</p></li><li><p>Provides a store that writes Sapphire XML files.</p></li></ul></div>				
			</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N1003B"></a>Sources</h2></div></div><div></div></div><p>
				Sources are the places that MediaInfoFetcher retrieves information from. Sources
				are read only so it's not possible to information back too them. In the 
				current version their is a source for retrieving TV Show information from
			    from www.tv.com, but MediaInfoFetcher has been created in such a way that it's
			    easy to add new sources. 
			</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N10040"></a>Stores</h2></div></div><div></div></div><p>
				Stores are similar too sources, except that they are also writable. Once
				information has been retrieved from a source, it is written too a store.
				Next time the information is needed, it can be retrieved from the store.
				This makes retrieving information a lot faster.  
			</p><p>
				Their are 3 stores that come with MediaInfoFetcher. Each of these has different 
				properties. Some of these stores can also be used by applications such as 
				media centre's to display media metadata. 				
			</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="N10047"></a>org.stanwood.media.store.MemoryStore</h3></div></div><div></div></div><p>
				This store is used to store the show information in memory. This allows the tool
 				reuse the show information without having to fetch it from other stores or sources 
 				(which would be slower). This information will be lost once the application exits. 
				</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="N1004C"></a>org.stanwood.media.store.XMLStore</h3></div></div><div></div></div><p>
				This store is used to store the show information in a XML called '.show.xml. ' 
               	This is located in the directory were the show is located. It can hold all
 				of the information of the Shows, Seasons, Episodes and Specials. This store
 				can be read and written too, and it's also possible too lookup the show id 
 				of the show in the current directory.
				</p></div><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="N10051"></a>org.stanwood.media.store.SapphireStore</h3></div></div><div></div></div><p>
				This is a write only store that is used to store information in a format that can 
 				be used by the <a href="http://appletv.nanopi.net/" target="_top">Sapphire</a> frontrow plugin. 
 				The details of the XML format can be found <a href="http://appletv.nanopi.net/manual/overriding-metadata/" target="_top">here</a>.
				</p><p>  				
 				Every time episode information is fetched from a source, a XML file is written with 
 				the name name as the episode file (except the extension is changed too .xml)  
				</p></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="installation"></a>Chapter&nbsp;2.&nbsp;Installation</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#N1006D">1. Linux Binary Distribution Packages</a></span></dt><dt><span class="sect1"><a href="#N1008B">2. Any platform static Jar Disturbution</a></span></dt></dl></div><p>
			Their are a few different ways to install MediaInfoFetcher. The different distributions 
		    can be found at <a href="http://code.google.com/p/tv-and-movies-meta-data-fetcher/downloads/list" target="_top"><i class="citetitle">Downloads</i></a> 
		</p><p>
			All of the distributions will require a Java 1.6 compatible JRE.
		</p><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N1006D"></a>1. Linux Binary Distribution Packages</h2></div></div><div></div></div><p>
				Their are several linux distribution packages that can be found in the downloads section of the website.
				If your distribution uses RPM packages, then following these instructions.
				<div class="orderedlist"><ol type="1"><li><p>Pick the packages for your distribution</p></li><li><p>Download them to a directory</p></li><li><p>Change to that directory from the console</p></li><li><p>Log in as root and run the command <span><b class="command">rpm -Uvh *.rpm</b></span></p></li></ol></div>				
			</p><p>
				This will install the the application and a script too launch it. The script is located at <span><b class="command">/usr/bin/media-renamer</b></span>
			</p></div><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="N1008B"></a>2. Any platform static Jar Disturbution</h2></div></div><div></div></div><p>
				Their is a static jar distribution avaliable on the downloads page. This will run on any platform with the
				correct JRE. Simply download it too your system, and type the command:
				<div class="cmdsynopsis"><p><tt class="command">java -jar MediaInfoFetcher-1.0-static-bin.jar </tt>  [options]</p></div>
			    This can be used to rename media files and uses the same command line parameters 
			    as the <a href="#mediarenamercmd" title="media-renamer">media-renamer</a> script.
			</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="usage"></a>Chapter&nbsp;3.&nbsp;CLI Usage</h2></div></div><div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#mediarenamercmd">media-renamer</a></span></dt><dd><dl><dt><span class="sect2"><a href="#N1011E">Pattern</a></span></dt></dl></dd></dl></div><p></p><div class="sect1" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="mediarenamercmd"></a>media-renamer</h2></div></div><div></div></div><p>
				The media-renamer command is used to rename media files such as TV Shows in a directory with the correct names.
				The information is fetched from sources and the information to when performing the renaming. In order that 
				it does not have to fetch the data every time, the data is cached in stores.
				<div class="cmdsynopsis"><p><tt class="command">media-renamer</tt>  [-h] [-s <i class="replaceable"><tt>showId</tt></i>] [-d <i class="replaceable"><tt>show directory</tt></i>] [-p <i class="replaceable"><tt>rename pattern</tt></i>] [-o <i class="replaceable"><tt>source id</tt></i>] [-r] [-c <i class="replaceable"><tt>config file</tt></i>]</p></div>
			</p><p>
				The command has the following options:
				<div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">-h, --help</tt> Show the help message</p></li><li><p><tt class="literal">-s, --showid</tt> The ID of the movie/show. If not present, then it will search for the show id.</p></li><li><p><tt class="literal">-d, --showdir</tt> The directory to look for media. If not present use the current directory.</p></li><li><p><tt class="literal">-p, --pattern</tt> The pattern used to rename files. Defaults to "%s %e - %t.%x" if not present.</p></li><li><p><tt class="literal">-o, --source</tt> The id if the source too look up meta data in. Defaults too tvcom if not present.</p></li><li><p><tt class="literal">-r, --refresh</tt> If this option is present, it will make the stores get regenerated from source.</p></li><li><p><tt class="literal">-c, --config</tt> The location of the config file. If not present, attempts to load it from /etc/mediafetcher-conf.xml</p></li></ul></div>				
			</p><p>
				The media-renamer command presumes that each TV show's media files are contained 
				in a directory. It also has the ability to search for the TV Shows id by using the
				directory name as the name of the show, so it would be beneficial if the media
				files for each show are in a directory with the shows name. 								
			</p><p>
				Too override the show ID been used, use the <tt class="literal">--showid</tt> option on 
				the CLI. If you are using stores, they will store the show id (if they support
				this functionality). This can then be used when searching for a show id instead
				of the directory name.				
			</p><p>
				It is possible to configure which sources and stores are used by the application.
				This is done by using a configuration file. If the <tt class="literal">--config</tt> option
				is used, then the file passed into this is the configuration file that will be used.
				If the <tt class="literal">--config</tt> option is not used, then first off the application
				looks for a configuration file located at <tt class="filename">/etc/mediafetcher-conf.xml</tt>.
				If that can't be found, then it uses in built defaults. For more information on the configuration
				files, see the <a href="#configuration" title="Chapter&nbsp;4.&nbsp;Configuration">Configuration section</a>.
			</p><div class="sect2" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="N1011E"></a>Pattern</h3></div></div><div></div></div><p>Each of the files that is renamed is done according to a pattern. A pattern 
				is a text string that contains tokens. These tokens are replaced by the
				show/episode information.  
				</p><p>
					The following list contains the meaning for each token:
					<div class="itemizedlist"><ul type="disc"><li><p><tt class="literal">%h</tt> - show Id</p></li><li><p><tt class="literal">%s</tt> - series number</p></li><li><p><tt class="literal">%e</tt> - episode number</p></li><li><p><tt class="literal">%n</tt> - show name</p></li><li><p><tt class="literal">%t</tt> - episode title</p></li><li><p><tt class="literal">%x</tt> - extension (avi, mkv....)</p></li></ul></div>
				</p><div class="example"><a name="N1014B"></a><p class="title"><b>Example&nbsp;3.1.&nbsp;Examples:</b></p><p>
						The following options show what happens when they are used to rename 
					     the 4th episode of the 2nd season of the show heroes.
					     <div class="itemizedlist"><ul type="disc"><li><p>"S%s E%e - %t.%x" = "S2 E04 - The Kindness of Strangers.avi"</p></li><li><p>"%sx%e.%n.%t.%x" = "2x04.Heroes.The Kindness of Strangers.avi"</p></li><li><p>"%sx%e.%h.%t.%x" = "2x04.17552.The Kindness of Strangers.avi"</p></li></ul></div>
					</p></div></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="configuration"></a>Chapter&nbsp;4.&nbsp;Configuration</h2></div></div><div></div></div><p>The applications and the API make use of a XML configuration file. This
			  tells them which sources and stores should be used.
		</p><p>
			The applications have CLI options that can be used too tell it which configuration
			file too use. If this option is not present, then it will look for the file at the 
			location <tt class="filename">/etc/mediafetcher-conf.xml</tt>. If this can't be found,
			it will fall back too using default settings.
		</p><p>
			The default file is as follows:
			<div class="example"><a name="N10169"></a><p class="title"><b>Example&nbsp;4.1.&nbsp;/etc/mediafetcher-conf.xml</b></p><pre class="programlisting">
			&lt;config&gt;
       &lt;sources&gt;
               &lt;!-- www.tv.com TV Show information source --&gt;
               &lt;source id="org.stanwood.media.source.TVCOMSource"/&gt;
       &lt;/sources&gt;
       &lt;stores&gt;
               &lt;!-- Caches data in memory while the application is running --&gt;
               &lt;store id="org.stanwood.media.store.MemoryStore"/&gt;

               &lt;!-- A Store for saving Show/Movies in a XML file in the current directory --&gt;
                &lt;store id="org.stanwood.media.store.XMLStore"/&gt;
        &lt;/stores&gt;
&lt;/config&gt;			
				</pre></div>			
		</p></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="credits-and-licenses"></a>Chapter&nbsp;5.&nbsp;Credits and Licenses</h2></div></div><div></div></div><p>MediaInfoFetcher</p><div class="itemizedlist"><ul type="disc"><li><p>John-Paul Stanford <tt class="email">&lt;<a href="mailto:dev@stanwood.org.uk">dev@stanwood.org.uk</a>&gt;</tt> - Original Author</p></li></ul></div><p>
        	Documentation copyright 2008, John-Paul Stanford
            <tt class="email">&lt;<a href="mailto:dev@stanwood.org.uk">dev@stanwood.org.uk</a>&gt;</tt>
		</p></div></div></body></html>